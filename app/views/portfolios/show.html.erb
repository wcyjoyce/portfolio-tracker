<strong><%= @portfolio.name.capitalize %></strong>

<div>
  <strong>Portfolio Settings:</strong>
  <%= link_to "Edit", edit_portfolio_path(@portfolio) %>
  <%= link_to "Delete", portfolio_path(@portfolio), method: :delete, data: { confirm: "Are you sure you want to delete?" } %>
</div>

<div>
  <% unless @portfolio.stocks.empty? %>
    <table>
      <tr>
        <th>Name</th>
        <th>Ticker</th>
        <th>Quantity</th>
        <th>Cost</th>
        <th>Current Price</th>
        <th>Total Cost</th>
        <th>Market Value</th>
        <th>P&L ($)</th>
        <th>Return (%)</th>
        <th>Date Added</th>
        <th>Action</th>
      </tr>
      <% @portfolio.stocks.each do |stock| %>
        <tr>
          <td><%= stock.name(stock.ticker) %></td>
          <td><%= stock.ticker %></td>
          <td><%= stock.shares %></td>
          <td><%= "%.2f" % stock.price %></td>
          <td><%= stock.current_price(stock.ticker) %></td>
          <td><%= number_with_delimiter("%.2f" % stock.total_cost) %></td>
          <td><%= number_with_delimiter("%.2f" % stock.market_value) %></td>
          <td><%= number_with_delimiter("%.2f" % stock.profit_amount) %></td>
          <td><%= stock.profit_pct.round(2) %>%</td>
          <td><%= stock.added.strftime("%d %b %Y") %></td>
          <td><%= link_to "edit", edit_stock_path(stock) %> | <%= link_to "delete", stock_path(stock), method: :delete, data: { confirm: "Are you sure you want to delete?"} %> | <%= link_to "show", stock_path(stock) %></td>
        </tr>
      <% end %>
      <tr><strong>
        <th>Total</th> <!-- Name -->
        <th></th> <!-- Ticker -->
        <th></th> <!-- Quantity -->
        <th></th> <!-- Cost -->
        <th></th> <!-- Current Price -->
        <th><%= number_with_delimiter("%.2f" % @portfolio.total_cost) %></th> <!-- Total Cost -->
        <th><%= number_with_delimiter("%.2f" % @portfolio.market_value) %></th> <!-- Market Value -->
        <th><%= number_with_delimiter("%.2f" % @portfolio.profit_amount) %></th><!-- P&L ($) -->
        <th><%= @portfolio.profit_pct.round(2) %>%</th><!-- P&L (%) -->
      </strong></tr>
    </table>
  <% else %>
    <p>There are no stocks in <%= @portfolio.name.capitalize %>.</p>
  <% end %>
</div>

<br>

<div>
  <%= link_to "add new stock", new_stock_path %>
</div>
